# 自訂name

$ ./elasticsearch -Ecluster.name=my_cluster_name -Enode.name=my_node_name


------------------------------------------------------------------------------------
# 看健康指數

$ curl -X GET "localhost:9200/_cat/health?v"


------------------------------------------------------------------------------------
# 顯示node

$ curl -X GET "localhost:9200/_cat/nodes?v"


------------------------------------------------------------------------------------
# 顯示index (只有一行表示沒index)

$ curl -X GET "localhost:9200/_cat/indices?v"

health status index    uuid                   pri rep docs.count docs.deleted store.size pri.store.size
yellow open   customer 95SQ4TSUT7mWBT7VNHH67A   5   1          0            0       260b           260b

PS: 5 shards , 1 replica , 0 documents 


------------------------------------------------------------------------------------
# 建立index (index 名為 customer)

$ curl -X PUT "localhost:9200/customer?pretty"


------------------------------------------------------------------------------------
# 顏色指示

    Green - everything is good (cluster is fully functional)
    Yellow - all data is available but some replicas are not yet allocated (cluster is fully functional)
    Red - some data is not available for whatever reason (cluster is partially functional) 
    
    
------------------------------------------------------------------------------------
# 加入 doc 進  index (index 名為 customer)

$ curl -X PUT "localhost:9200/customer/_doc/1?pretty" -H 'Content-Type: application/json' -d'
{
  "name": "John Doe"
}
'

PS : /_doc/[1] --> 若想要不給id 要用 POST

------------------------------------------------------------------------------------
# 取回  doc

$ curl -X GET "localhost:9200/customer/_doc/1?pretty"

Ps: /_doc/[1] <-- id, found : (true|false) 是否找到


------------------------------------------------------------------------------------
# 刪除 doc

$ curl -X DELETE "localhost:9200/customer?pretty"


------------------------------------------------------------------------------------
# 更新 doc

$ curl -X POST "localhost:9200/customer/_doc/QlmOhGUBXFaJibnYQmjW/_update?pretty" -H 'Content-Type: application/json' -d'
{
  "doc": { "name": "Jane Doe Ver2", "age": 20 }
}
'

PS : QlmOhGUBXFaJibnYQmjW --> id

=========================================
# 更新 doc with script

$ curl -X POST "localhost:9200/customer/_doc/QlmOhGUBXFaJibnYQmjW/_update?pretty" -H 'Content-Type: application/json' -d'
{
  "script" : "ctx._source.age += 5"
}
'

Ps : 更新 age = age + 5


------------------------------------------------------------------------------------
# 查詢 doc

$ curl -X GET "localhost:9200/customer/_search?pretty=true&q=*:*"
PS :　預設10筆

$ curl -X GET "localhost:9200/customer/_search?pretty=true&q=*:*&size=<number here>"
PS :　自訂筆數

$ curl -XGET 'localhost:9200/customer/_search?search_type=scan&scroll=10m&size=50' -d '
{
    "query" : {
        "match_all" : {}
    }
}'


------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------