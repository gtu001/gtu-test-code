安裝

    $ sudo apt-get update
    $ sudo apt-get install postgresql postgresql-contrib


-----------------------------------------------------------------------------------
    
    
啟動服務
    
    $ sudo service postgresql start
        
        
-----------------------------------------------------------------------------------


確認cluster是否有在跑

    $ pg_lsclusters
    
        Ver Cluster Port Status Owner    Data directory              Log file
        10  main    5432 online postgres /var/lib/postgresql/10/main /var/log/postgresql/postgresql-10-main.log


-----------------------------------------------------------------------------------

控制cluster 

	$ pg_ctlcluster <cluster_version> <cluster-name> <action>
	
	用上上指令可看 參數內容
	Ps:
	設定檔位置 /etc/postgresql/<cluster-version>/<cluster-name>/start.conf
	Ps:
	可用Action : (start|stop|restart|reload|status|promote)
	
-----------------------------------------------------------------------------------

停掉cluster
	
	$ sudo -u postgres  pg_ctlcluster 10 main stop
	or
	$ sudo  systemctl  stop  postgresql@10-main

-----------------------------------------------------------------------------------
登入 postgres shell

	$ su postgres
	$ psql
	
	postgres=# 執行底下
		$ CREATE SCHEMA test;
		
		//option
		$ CREATE USER test_user PASSWORD '1234';
		$ CREATE ROLE test_user WITH LOGIN PASSWORD '1234' VALID UNTIL '2099-01-01' ;
		
		$ GRANT ALL ON SCHEMA test TO test_user;
		$ GRANT ALL ON ALL TABLES IN SCHEMA test TO test_user;
		
		$ create database TEST with owner test_user encoding utf8 ;
		
		$ \q  <--disconnect
		

-----------------------------------------------------------------------------------
建立新postres於linux的user (透過postgres建立linux user)

	1.於user postgres底下
		$ createuser --interactive
	2.於其他user底下
		$ sudo -u postgres createuser --interactive
		
	Ps: 建立後可以切換至該user , 用以登入 psql shell
	

-----------------------------------------------------------------------------------
顯示連線資訊
	postgres=# 執行底下
		$ \conninfo
		

-----------------------------------------------------------------------------------
顯示資料庫關聯
	postgres=# 執行底下
		$ \d
		$ \dt
		

-----------------------------------------------------------------------------------
連線測試

	$ psql -h 127.0.0.1 -p 5432 -U test_user -d test
		Ps : h host
			 p port
			 U user
			 d database
			 

-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------